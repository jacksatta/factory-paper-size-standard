export default { ws:null, async connect(cfg){ this.ws=new WebSocket((cfg&&cfg.wsURL)||'ws://localhost:8765'); return new Promise((res)=>{ this.ws.onopen=()=>res({ok:true}); this.ws.onerror=()=>res({ok:false}); }); }, async sendCommand(t,c,p){ if(!this.ws||this.ws.readyState!==1) return {ok:false}; this.ws.send(JSON.stringify({target:t,command:c,params:p})); return {ok:true}; }, async getStatus(){return {ok:true}}, async disconnect(){ if(this.ws){this.ws.close(); this.ws=null;} return {ok:true}; } };